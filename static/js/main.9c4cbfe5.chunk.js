(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{131:function(e,t,a){},133:function(e,t,a){e.exports={wrapper:"Preloader_wrapper__mRgX_"}},134:function(e,t,a){e.exports=a.p+"static/media/Spinner-1s-200px.caacf12e.svg"},135:function(e,t,a){e.exports={fileInputWrapper:"ImageInput_fileInputWrapper__1Hrij"}},139:function(e,t,a){e.exports={posts:"Posts_posts__3KNZe"}},140:function(e,t,a){e.exports={wrapper:"NewPost_wrapper__28y4M"}},141:function(e,t,a){},142:function(e,t,a){e.exports=a.p+"static/media/heart.e2fb03b6.svg"},143:function(e,t,a){e.exports=a.p+"static/media/heart-blue.5296fdf6.svg"},144:function(e,t,a){e.exports={myMessages:"Messages_myMessages__2oDoW",messages:"Messages_messages__127oX"}},145:function(e,t,a){e.exports=a.p+"static/media/chat.7e0e3b50.svg"},146:function(e,t,a){e.exports=a.p+"static/media/photoMock.55b5f2b0.png"},147:function(e,t,a){e.exports={messages:"Music_messages__igq5D"}},148:function(e,t,a){e.exports=a.p+"static/media/left-arrow.77c86913.svg"},149:function(e,t,a){e.exports=a.p+"static/media/right-arrow.4b713cfe.svg"},150:function(e,t,a){e.exports={news:"News_news__1HLiF"}},151:function(e,t,a){e.exports={settings:"Settings_settings__3T_E_"}},152:function(e,t,a){e.exports={errorPage:"ErrorPage_errorPage__TNCK9"}},153:function(e,t,a){e.exports=a.p+"static/media/error.f36e4c88.svg"},180:function(e,t,a){e.exports=a(306)},185:function(e,t,a){},186:function(e,t,a){},19:function(e,t,a){e.exports={nav:"Menu_nav__2UfXk",nav__list:"Menu_nav__list__24xDz",item:"Menu_item__gApBI"}},24:function(e,t,a){e.exports={form:"Login_form__1sdVK",formInnerWrapper:"Login_formInnerWrapper__OGRH_",loginBottom:"Login_loginBottom__2h6wK",formError:"Login_formError__jZOOe",formSubmit:"Login_formSubmit__1iKid",rememberMeWrapper:"Login_rememberMeWrapper__3psDm",checkboxInput:"Login_checkboxInput__1oIMa",loginWrapper:"Login_loginWrapper__sLUA1",disabledButton:"Login_disabledButton__1Srwq"}},27:function(e,t,a){e.exports={wrapper:"Users_wrapper__11jvS",users:"Users_users__1oA0q",user:"Users_user__Bji3I",profilePhoto:"Users_profilePhoto__25ruu",followButton:"Users_followButton__Wf6D6",userLocation:"Users_userLocation__3-uu4",userStatus:"Users_userStatus__3Mltb"}},30:function(e,t,a){e.exports={dialogWrapper:"CurrentDialog_dialogWrapper__1d-_W",selectNotification:"CurrentDialog_selectNotification__2ZCgY",messageInputWrapper:"CurrentDialog_messageInputWrapper__18351",messagesWrapper:"CurrentDialog_messagesWrapper__2ovNf",me:"CurrentDialog_me__325-a",other:"CurrentDialog_other__155F3"}},306:function(e,t,a){"use strict";a.r(t);var r,n=a(0),s=a.n(n),o=a(67),i=a.n(o),c=(a(185),a(13)),l=a(14),u=a(15),p=a(16),m=(a(186),a(131)),f=a.n(m),d=a(19),g=a.n(d),h=a(12),E=function(){return s.a.createElement("nav",{className:g.a.nav},s.a.createElement("ul",{className:g.a.nav__list},s.a.createElement("li",{className:g.a.item},s.a.createElement(h.b,{to:"/profile",activeClassName:g.a.active},"Profile")),s.a.createElement("li",{className:g.a.item},s.a.createElement(h.b,{to:"/messages",activeClassName:g.a.active},"Messages")),s.a.createElement("li",{className:g.a.item},s.a.createElement(h.b,{to:"/news",activeClassName:g.a.active},"News")),s.a.createElement("li",{className:g.a.item},s.a.createElement(h.b,{to:"/music",activeClassName:g.a.active},"Music")),s.a.createElement("li",{className:g.a.item},s.a.createElement(h.b,{to:"/settings",activeClassName:g.a.active},"Settings")),s.a.createElement("li",{className:g.a.item},s.a.createElement(h.b,{to:"/users",activeClassName:g.a.active},"Users"))))},_=a(57),b=a.n(_),v=function(e){var t=e.friendsData.map((function(e){return s.a.createElement("li",{key:e.id,className:b.a.item},s.a.createElement(h.b,{to:"/pasha"},s.a.createElement("img",{width:"40",src:e.img,alt:"avatar"}),s.a.createElement("span",null,e.name)))}));return s.a.createElement("section",{className:b.a.friends},s.a.createElement("h2",{className:b.a.title},"Friends"),s.a.createElement("ul",{className:b.a.list},t))},k=a(9),N=Object(k.b)((function(e){return{friendsData:e.navBar.friendsData}}),(function(e){return{}}))(v),O=N,P=function(e){return s.a.createElement("div",{className:f.a.navWrapper},s.a.createElement(E,null),s.a.createElement(O,null))},w=a(5),S=a(45),j=a.n(S),I=a(133),y=a(134),T=a.n(y),x=function(e){return s.a.createElement("div",{className:I.wrapper},s.a.createElement("img",{src:T.a,alt:""}))},C=a(69),A=a.n(C),L=a(135),W=a.n(L),D=a(129),M=a(7),U=a(10),F=a.n(U),R=a(18),B=a(72),z=a(136),H=z.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"d7b00a42-897a-4e8f-9782-45121810f4b8"}}),Y=function(){return H.get("security/get-captcha-url").then((function(e){return e.data}))},G=function(e,t){return H.get("users?count=".concat(e,"&page=").concat(t)).then((function(e){return e.data}))},J=function(){return H.get("auth/me").then((function(e){return e.data}))},K=function(e){return H.post("auth/login",Object(w.a)({},e,{rememberMe:!1})).then((function(e){return e.data}))},Z=function(){return H.delete("auth/login").then((function(e){return e.data}))},q=function(e){return H.post("follow/".concat(e)).then((function(e){return e.data}))},X=function(e){return H.delete("follow/".concat(e)).then((function(e){return e.data}))},V=function(e){return H.get("profile/".concat(e)).then((function(e){return e.data}))},Q=function(e){return H.put("profile/status",{status:e})},$=function(e){return H.get("profile/status/".concat(e)).then((function(e){return e.data}))},ee=function(e){return H.put("profile/photo",e,{headers:{"Content-type":"multipart/form-data"}}).then((function(e){return e.data}))},te=function(e){return H.put("profile",e).then((function(e){return e.data}))},ae=a(25),re="profilePage-reducer/ADD-POST",ne="profilePage-reducer/SET-PROFILE-INFO",se="profilePage-reducer/SET-STATUS-TEXT",oe="profilePage-reducer/SET_IS_PROFILE_YOURS",ie="profilePage-reducer/SET_PROFILE_PHOTO",ce="profilePage-reducer/UPDATE_PROFILE_DATA",le={postsData:[{id:1,message:"It's my first props!",likes:20,liked:!1},{id:2,message:"Wow! That's amazing!",likes:12,liked:!1}],postAreaText:"",profileInfo:null,userStatus:"",isProfileYours:!1},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:var a={id:3,message:t.message,likes:0,liked:!1};return Object(w.a)({},e,{postsData:[a].concat(Object(B.a)(e.postsData)),postAreaText:""});case ne:return Object(w.a)({},e,{profileInfo:t.info});case se:return Object(w.a)({},e,{userStatus:t.statusText});case oe:return Object(w.a)({},e,{isProfileYours:t.status});case ie:return Object(w.a)({},e,{profileInfo:Object(w.a)({},e.profileInfo,{photos:t.photos})});case ce:return Object(w.a)({},e,{profileInfo:Object(w.a)({},t.info)});default:return e}},pe=function(e){return{type:ne,info:e}},me=function(e){return{type:se,statusText:e}},fe=Object(M.d)(Object(k.b)((function(){}),{updateProfilePhotoThunk:function(e){return function(){var t=Object(R.a)(F.a.mark((function t(a){var r,n;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new FormData).append("image",e),t.next=4,ee(r);case 4:0===(n=t.sent).resultCode&&a((s=n.data.photos,{type:ie,photos:s}));case 6:case"end":return t.stop()}var s}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Object(D.a)({form:"imageInput"}))((function(e){return s.a.createElement("form",{onSubmit:e.handleSubmit},s.a.createElement("label",{className:W.a.fileInputWrapper},s.a.createElement("span",null,"Click to select new"),s.a.createElement("input",{type:"file",name:"selectFile",onChange:function(t){e.updateProfilePhotoThunk(t.target.files[0])}})))})),de=a(6),ge=a.n(de),he=a(21),Ee=function(e){var t=Object(n.useState)(!1),a=Object(he.a)(t,2),r=a[0],o=a[1],i=Object(n.useState)(e.userStatus),c=Object(he.a)(i,2),l=c[0],u=c[1];return Object(n.useEffect)((function(){u(e.userStatus)}),[e.userStatus]),s.a.createElement("div",{className:ge.a.status,onClick:function(){o(!0)},onBlur:function(){o(!1),e.updateStatusThunk(l)}},r?s.a.createElement("input",{onChange:function(e){u(e.currentTarget.value)},autoFocus:!0,type:"text",value:l,className:ge.a.statusInput}):s.a.createElement("span",{className:ge.a.statusText},e.userStatus?e.userStatus:"No status"))},_e=function(e){var t=e.contactTitle,a=e.contactLink;return s.a.createElement("div",{className:ge.a.contactsWrapper},s.a.createElement("p",{className:ge.a.contactTitle},t,":"),s.a.createElement("p",null,a))},be=function(e){return s.a.createElement("div",{className:ge.a.personal},s.a.createElement("h2",{className:ge.a.name},e.profileInfo.fullName),s.a.createElement(Ee,{isProfileYours:e.isProfileYours,userStatus:e.userStatus,updateStatusThunk:e.updateStatusThunk}),s.a.createElement("div",{className:ge.a.personal},s.a.createElement("p",{className:ge.a.aboutMeWrapper},s.a.createElement("span",{className:ge.a.personalTitle},"About me:"),s.a.createElement("span",null,e.profileInfo.aboutMe)),s.a.createElement("p",{className:ge.a.jobWrapper},s.a.createElement("span",{className:ge.a.personalTitle},"Job seeker:"),s.a.createElement("span",null,e.profileInfo.lookingForAJob?s.a.createElement("span",null,"Yes"):s.a.createElement("span",null,"No"))),s.a.createElement("p",{className:ge.a.positionWrapper},s.a.createElement("span",{className:ge.a.personalTitle},"Position:"),s.a.createElement("span",null,e.profileInfo.lookingForAJobDescription)),s.a.createElement("fieldset",{className:ge.a.socialWrapper},s.a.createElement("legend",null,"Social media links:"),Object.keys(e.profileInfo.contacts).map((function(t){return s.a.createElement(_e,{key:t,contactTitle:t,contactLink:e.profileInfo.contacts[t]})}))),e.isProfileYours&&!0===e.editMode&&s.a.createElement("div",{className:ge.a.editWrapper},s.a.createElement("button",{className:ge.a.editButton},"Save changes"),s.a.createElement("p",{onClick:function(){e.changeEditMode(!1)},className:ge.a.cancelButton},"Cancel")),e.error&&s.a.createElement("p",{className:ge.a.formError},e.error),e.error&&e.displayError(e.error)))},ve=a(128),ke=a(58),Ne=a.n(ke),Oe=a(138),Pe=a.n(Oe),we=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("textarea",Object.assign({},this.props.input,this.props,{className:this.props.meta.error&&this.props.meta.touched?Ne.a.error:"field"})),this.hasError&&s.a.createElement("span",{className:Ne.a.errorMessage},this.props.meta.error))}}]),a}(s.a.Component),Se=function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement("input",Object.assign({},e.input,e,{className:Pe()(e.meta.error&&e.meta.touched?Ne.a.error:"field")})),e.meta.error&&e.meta.touched&&s.a.createElement("span",{className:Ne.a.errorMessage},e.meta.error))},je=function(e){e.profileInfo;var t=e.inputName;return s.a.createElement("label",null,s.a.createElement("span",null,t),s.a.createElement(ve.a,{name:t,component:Se,type:"text"}))},Ie=Object(D.a)({form:"profileEdit"})((function(e){return s.a.createElement("form",{className:ge.a.personal,onSubmit:e.handleSubmit},s.a.createElement("h2",{className:ge.a.name+" visually-hidden"},e.profileInfo.fullName),s.a.createElement("label",{className:ge.a.fullNameWrapper},s.a.createElement("span",null,"Full name:"),s.a.createElement(ve.a,{name:"fullName",component:"input",type:"text",placeholder:"Name Surname"})),s.a.createElement("label",{className:ge.a.aboutMeWrapper},s.a.createElement("span",null,"About me:"),s.a.createElement(ve.a,{name:"aboutMe",component:"input",type:"text",placeholder:"a few words.."})),s.a.createElement("label",{className:ge.a.jobWrapper},s.a.createElement("span",null,"Job seeker:"),s.a.createElement(ve.a,{name:"lookingForAJob",component:"input",type:"checkbox"})),s.a.createElement("label",{className:ge.a.positionWrapper},s.a.createElement("span",null,"Position:"),s.a.createElement(ve.a,{name:"lookingForAJobDescription",component:"input",type:"text",placeholder:"it or gastronomy?"})),s.a.createElement("fieldset",{className:ge.a.socialWrapper},s.a.createElement("legend",null,"Social media links:"),Object.keys(e.profileInfo.contacts).map((function(t){return s.a.createElement(je,{profileInfo:e.profileInfo,key:t,inputName:t})}))),e.isProfileYours&&!0===e.editMode&&s.a.createElement("div",{className:ge.a.editWrapper},e.isChangesLoading?s.a.createElement("button",{className:ge.a.disabledSaveButton,disabled:!0},"Loading.."):s.a.createElement("button",{className:ge.a.editButton},"Save changes"),s.a.createElement("p",{onClick:function(){e.changeEditMode(!1)},className:ge.a.cancelButton},"Cancel")),e.error&&s.a.createElement("p",{className:ge.a.formError},e.error),e.error&&e.displayError(e.error))})),ye=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).changeEditMode=function(e){r.setState({editMode:e})},r.changeFormErrorStatus=function(e){r.setState({isFormError:e})},r.initialFormValues=function(){var e=r.props.profileInfo;return Object(w.a)({},e,{facebook:e.contacts.facebook,vk:e.contacts.vk,website:e.contacts.website,twitter:e.contacts.twitter,instagram:e.contacts.instagram,github:e.contacts.github,youtube:e.contacts.youtube,mainLink:e.contacts.mainLink})},r.state={editMode:!1,isFormError:!1,isChangesLoading:!1},r}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return this.props.profileInfo?s.a.createElement("section",{className:j.a.info},s.a.createElement("div",{className:j.a.imageWrapper},s.a.createElement("img",{src:this.props.profileInfo.photos.large?this.props.profileInfo.photos.large:A.a,height:"300",alt:"profile pic",className:j.a.avatar}),this.props.isProfileYours&&this.state.editMode&&s.a.createElement(fe,null)),this.state.editMode?s.a.createElement(Ie,Object.assign({onSubmit:function(t){var a=Object(w.a)({},t,{contacts:{facebook:t.facebook,vk:t.vk,instagram:t.instagram,website:t.website,twitter:t.twitter,youtube:t.youtube,github:t.github}});e.setState({isChangesLoading:!0}),e.props.saveProfileDataThunk(a).then((function(){e.changeEditMode(!1),e.setState({isChangesLoading:!1})}))},isChangesLoading:this.state.isChangesLoading,editMode:this.state.editMode,changeEditMode:this.changeEditMode,displayError:function(t){if(void 0!==t)return s.a.createElement("p",{className:j.a.formError},t);e.changeFormErrorStatus(!0)}},this.props,{initialValues:this.initialFormValues()})):s.a.createElement(be,Object.assign({},this.props,{editMode:this.editMode})),this.props.isProfileYours&&!1===this.state.editMode&&s.a.createElement("button",{onClick:function(){e.changeEditMode(!0)},className:j.a.editButton},"Edit Profile")):s.a.createElement(x,null)}}]),a}(s.a.Component),Te=a(139),xe=a.n(Te),Ce=a(140),Ae=a.n(Ce),Le=(a(53),function(e){if(!e)return"This field is required"}),We=(r=100,function(e){if(e.length>r)return"Max length is ".concat(r+" symbols")}),De=Object(D.a)({form:"addPost"})((function(e){return s.a.createElement("form",{onSubmit:e.handleSubmit,className:Ae.a.wrapper},s.a.createElement(ve.a,{validate:[Le,We],name:"currentText",component:we,placeholder:"What's new?"}),s.a.createElement("button",{type:"submit"},"Post"))})),Me=a(141),Ue=a.n(Me),Fe=a(38),Re=a.n(Fe),Be=a(142),ze=a.n(Be),He=a(143),Ye=a.n(He),Ge=function(e){return s.a.createElement("div",{className:Re.a.post},s.a.createElement("div",{className:Re.a.labelWrapper},s.a.createElement("img",{src:e.photo,alt:"avatar",height:"40",className:Re.a.postImage}),s.a.createElement("span",{className:Re.a.profileName},e.name)),s.a.createElement("p",{className:Re.a.message},e.message),s.a.createElement("p",{className:Re.a.likes,onClick:e.likeToggle},e.isLiked?s.a.createElement("img",{src:Ye.a,alt:"likes count",width:"18px"}):s.a.createElement("img",{src:ze.a,alt:"likes count",width:"18px"}),e.isLiked?e.likes+1:e.likes))},Je=function(e){var t=Object(n.useState)(!1),a=Object(he.a)(t,2),r=a[0],o=a[1];return s.a.createElement(Ge,Object.assign({},e,{likeToggle:function(e){o(!1===r)},isLiked:r}))},Ke=function(e){var t=e.postsData.map((function(t){return s.a.createElement(Je,{photo:e.profileInfo.photos.small,key:t.id,message:t.message,likes:t.likes,name:e.profileInfo.fullName})}));return s.a.createElement("div",{className:Ue.a.old},t)},Ze=Object(k.b)((function(e){return{postsData:e.profilePage.postsData}}),(function(e){return{}}))(Ke),qe=function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement("h2",{className:"visually-hidden"},"My posts"),s.a.createElement(De,{onSubmit:function(t){e.addNewPost(t.currentText),t.currentText=""}}),s.a.createElement(Ze,e))},Xe=function(e){return s.a.createElement("section",{className:xe.a.posts},e.isProfileYours&&s.a.createElement(qe,e))},Ve=a(97),Qe=a.n(Ve),$e=function(e){return s.a.createElement("section",{className:Qe.a.profile},s.a.createElement("div",{className:Qe.a.wrapper},s.a.createElement(ye,e),s.a.createElement(Xe,e)))},et=a(11),tt=function(e){return{isAuth:e.authReducer.isAuthorized}},at=function(e){return Object(k.b)(tt)((function(t){return!1===t.isAuth?s.a.createElement(et.a,{to:"/login"}):s.a.createElement(e,t)}))},rt=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"checkProfile",value:function(){var e=this,t=this.props.match.params.userId;t||(t=this.props.authorizedId),this.props.getProfileInfoThunk(t).then((function(t){e.props.profileInfo.userId===e.props.authorizedId?e.props.setIsProfileYours(!0):e.props.setIsProfileYours(!1)})),this.props.getUserStatusThunk(t)}},{key:"componentDidMount",value:function(){this.checkProfile()}},{key:"componentDidUpdate",value:function(e,t,a){this.props.match.params.userId!==e.match.params.userId&&this.checkProfile()}},{key:"render",value:function(){return s.a.createElement($e,{profileInfo:this.props.profileInfo,userStatus:this.props.userStatus,updateStatusThunk:this.props.updateStatusThunk,addNewPost:this.props.addNewPost,authorizedId:this.props.authorizedId,isProfileYours:this.props.isProfileYours,saveProfileDataThunk:this.props.saveProfileDataThunk})}}]),a}(s.a.Component),nt=Object(M.d)(Object(k.b)((function(e){return{profileInfo:e.profilePage.profileInfo,isAuth:e.authReducer.isAuthorized,userStatus:e.profilePage.userStatus,authorizedId:e.authReducer.id,isProfileYours:e.profilePage.isProfileYours}}),{saveProfileDataThunk:function(e){return function(){var t=Object(R.a)(F.a.mark((function t(a){var r;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te(e);case 2:0===(r=t.sent).resultCode?a({type:ce,info:e}):a(Object(ae.a)("profileEdit",{_error:r.messages[0]||"Some error"}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getProfileInfoThunk:function(e){return function(){var t=Object(R.a)(F.a.mark((function t(a){var r;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V(e);case 2:r=t.sent,a(pe(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatusThunk:function(e){return function(){var t=Object(R.a)(F.a.mark((function t(a){return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q(e);case 2:if(0!==t.sent.data.resultCode){t.next=7;break}return t.abrupt("return",a(me(e)));case 7:return t.abrupt("return",alert("Too large status or server error"));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getUserStatusThunk:function(e){return function(){var t=Object(R.a)(F.a.mark((function t(a){var r;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$(e);case 2:r=t.sent,a(me(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},addNewPost:function(e){return{type:re,message:e}},setIsProfileYours:function(e){return{type:oe,status:e}},setProfileInfo:pe}),at,et.g)(rt),st=a(144),ot=a.n(st),it=a(74),ct=a.n(it),lt=function(e){return s.a.createElement("div",{className:ct.a.peopleWrapper},e.dialogsData.map((function(t){return s.a.createElement("p",{key:t.id,className:ct.a.dialog,onClick:e.selectDialog},s.a.createElement("img",{src:t.photo?t.photo:e.photoMock,alt:"",width:"45",className:ct.a.dialogPhoto}),s.a.createElement("span",null,t.name))})))},ut=a(30),pt=a.n(ut),mt=Object(D.a)({form:"sendMessage"})((function(e){return s.a.createElement("form",{className:pt.a.messageInputWrapper,onSubmit:e.handleSubmit},s.a.createElement(ve.a,{name:"messageInput",placeholder:"Type message here..",component:we,className:pt.a.messagesInput}),s.a.createElement("button",{className:pt.a.sendMessageBtn},"Send"))})),ft=a(145),dt=a.n(ft),gt=function(e){return s.a.createElement("div",{className:pt.a.dialogWrapper},null!==e.selectedDialogIndex?s.a.createElement("div",{className:pt.a.messagesWrapper},e.dialogsData[e.selectedDialogIndex].messages.map((function(e){return s.a.createElement("p",{key:e.id,className:pt.a[e.classSet]},e.message)}))):s.a.createElement("p",{className:pt.a.selectNotification},s.a.createElement("img",{src:dt.a,alt:"chat icon",width:"100"}),s.a.createElement("span",null,"Select a dialog")),null!==e.selectedDialogIndex&&s.a.createElement(mt,{onSubmit:function(t){e.sendNewMessage(t.messageInput,e.selectedDialogIndex),t.messageInput=""}}))},ht="messagesPage-reducer/SEND-MESSAGE",Et={dialogsData:[{id:111,name:"Olga Plotskaya",photo:"",messages:[{id:11,message:"hi Olga Plotskaya",classSet:"me"},{id:22,message:"heya",classSet:"other"},{id:33,message:"What's up?",classSet:"me"},{id:44,message:"ok",classSet:"other"},{id:55,message:"and you?",classSet:"other"}]},{id:222,name:"Lukasz Kowalski",photo:"",messages:[{id:11,message:"hello Lukasz",classSet:"me"},{id:22,message:"heya",classSet:"other"},{id:33,message:"What's up?",classSet:"me"},{id:44,message:"ok",classSet:"other"},{id:55,message:"and you?",classSet:"other"}]},{id:333,name:"William Smith",photo:"",messages:[{id:11,message:"hi William",classSet:"me"},{id:22,message:"heya",classSet:"other"},{id:33,message:"What's up?",classSet:"me"},{id:44,message:"ok",classSet:"other"},{id:55,message:"and you?",classSet:"other"}]},{id:444,name:"Jorge Washington",photo:"",messages:[{id:11,message:"hi Jorge",classSet:"me"},{id:22,message:"heya",classSet:"other"},{id:33,message:"What's up?",classSet:"me"},{id:44,message:"ok",classSet:"other"},{id:55,message:"and you?",classSet:"other"}]},{id:555,name:"Thom Yorke",photo:"",messages:[{id:11,message:"hi Thom",classSet:"me"},{id:22,message:"heya",classSet:"other"},{id:33,message:"What's up?",classSet:"me"},{id:44,message:"ok",classSet:"other"},{id:55,message:"and you?",classSet:"other"}]}]},_t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ht:var a={message:t.message,classSet:"me"},r=JSON.parse(JSON.stringify(e.dialogsData));return r[t.dialogIndex].messages.push(a),Object(w.a)({},e,{dialogsData:r});default:return e}},bt=a(146),vt=a.n(bt),kt=Object(k.b)((function(e){return{dialogsData:e.messagesPage.dialogsData}}),{sendNewMessage:function(e,t){return{type:ht,message:e,dialogIndex:t}}})((function(e){var t=Object(n.useState)(null),a=Object(he.a)(t,2),r=a[0],o=a[1];return s.a.createElement("section",{className:ot.a.myMessages},s.a.createElement(lt,Object.assign({},e,{selectDialog:function(t){for(var a=0;a<e.dialogsData.length;a++)e.dialogsData[a].name===t.target.innerText&&o(a)},photoMock:vt.a})),s.a.createElement(gt,Object.assign({},e,{selectedDialogIndex:r})))})),Nt=a(147),Ot=a.n(Nt),Pt=a(44),wt=a.n(Pt),St=function(){return s.a.createElement("section",{className:Ot.a.messages},s.a.createElement("img",{src:wt.a,alt:"gear icon",width:"150"}),s.a.createElement("p",null,"Work in progress"))},jt="userPage-reducer/FOLLOW-USER",It="userPage-reducer/UNFOLLOW-USER",yt="userPage-reducer/LOAD-USERS",Tt="userPage-reducer/SET-CURRENT-PAGE",xt="userPage-reducer/SET-TOTAL-COUNT",Ct={users:[],totalUsers:0,currentPage:1,pageLimit:10,isFetching:!1,isFollowInProgress:[]},At=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case jt:return Object(w.a)({},e,{users:e.users.map((function(e){return e.id===t.userId?Object(w.a)({},e,{followed:!0}):Object(w.a)({},e)}))});case It:return Object(w.a)({},e,{users:e.users.map((function(e){return e.id===t.userId?Object(w.a)({},e,{followed:!1}):Object(w.a)({},e)}))});case yt:return Object(w.a)({},e,{users:t.users});case Tt:return Object(w.a)({},e,{currentPage:t.page});case xt:return Object(w.a)({},e,{totalUsers:t.usersCount});case"userPage-reducer/CHANGE-PRELOADER-STATUS":return Object(w.a)({},e,{isFetching:t.currentStatus});case"userPage-reducer/TOGGLE-FOLLOW-PROGRESS":return Object(w.a)({},e,{isFollowInProgress:t.currentStatus?[].concat(Object(B.a)(e.isFollowInProgress),[t.userID]):e.isFollowInProgress.filter((function(e){return e!==t.userID}))});default:return e}},Lt=function(e){return{type:Tt,page:e}},Wt=function(e){return{type:"userPage-reducer/CHANGE-PRELOADER-STATUS",currentStatus:e}},Dt=function(e,t){return{type:"userPage-reducer/TOGGLE-FOLLOW-PROGRESS",currentStatus:e,userID:t}},Mt=a(27),Ut=a.n(Mt),Ft=a(46),Rt=a.n(Ft),Bt=a(148),zt=a.n(Bt),Ht=a(149),Yt=a.n(Ht),Gt=function(e){for(var t=Math.ceil(e.totalUsers/e.pageLimit),a=[],r=1;r<=t;r++)a.push(r);var o=Math.ceil(t/15),i=Object(n.useState)(1),c=Object(he.a)(i,2),l=c[0],u=c[1],p=Object(n.useState)(15),m=Object(he.a)(p,2),f=m[0],d=m[1],g=Object(n.useState)(1),h=Object(he.a)(g,2),E=h[0],_=h[1];return s.a.createElement("div",{className:Rt.a.paginatorWrapper},l>1?s.a.createElement("button",{className:Rt.a.prevArrow,onClick:function(){d(f-=15),_(E-=15),u(l-=1)}},s.a.createElement("img",{src:zt.a,alt:"previous",width:"60"})):s.a.createElement("span",null),s.a.createElement("div",{className:Rt.a.pages},a.filter((function(e){return e<=f&&e>=E})).map((function(t){return s.a.createElement("span",{key:t,onClick:function(){return e.onPageChanged(t)},className:e.currentPage===t?Rt.a.currentPage:""},t)}))),l<o?s.a.createElement("button",{className:Rt.a.nextArrow,onClick:function(){d(f+=15),_(E+=15),u(l+=1)}},s.a.createElement("img",{src:Yt.a,alt:"previous",width:"60"})):s.a.createElement("span",null))},Jt=function(e){return s.a.createElement("div",{className:Ut.a.wrapper},s.a.createElement(Gt,e),s.a.createElement("ul",{className:Ut.a.users},e.isFetching&&s.a.createElement(x,null),e.users.map((function(t){return s.a.createElement("li",{key:t.id,className:Ut.a.user},s.a.createElement(h.b,{to:"/profile/"+t.id,className:Ut.a.profilePhoto},s.a.createElement("img",{src:null===t.photos.small?A.a:t.photos.small,alt:"",width:"100"})),s.a.createElement("div",{className:Ut.a.userWrapper},s.a.createElement("p",{className:Ut.a.userName},t.name),s.a.createElement("p",{className:Ut.a.userLocation},t.location),s.a.createElement("p",{className:Ut.a.userStatus},t.status)),t.followed?s.a.createElement("button",{disabled:e.isFollowInProgress.some((function(e){return e===t.id})),onClick:function(){e.unfollowThunk(t.id)},className:Ut.a.followButton},"Unfollow"):s.a.createElement("button",{disabled:e.isFollowInProgress.some((function(e){return e===t.id})),onClick:function(){e.followThunk(t.id)},className:Ut.a.followButton},"Follow"))}))))},Kt=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onPageChanged=function(t){e.props.getUsersThunk(e.props.pageLimit,t)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.getUsersThunk(this.props.pageLimit,this.props.currentPage)}},{key:"render",value:function(){return s.a.createElement(Jt,{totalUsers:this.props.totalUsers,pageLimit:this.props.pageLimit,currentPage:this.props.currentPage,users:this.props.users,onPageChanged:this.onPageChanged,followUser:this.props.followUser,unfollowUser:this.props.unfollowUser,isFetching:this.props.isFetching,isFollowInProgress:this.props.isFollowInProgress,toggleFollowProgress:this.props.toggleFollowProgress,unfollowThunk:this.props.unfollowThunk,followThunk:this.props.followThunk})}}]),a}(s.a.Component),Zt=Object(M.d)(Object(k.b)((function(e){return{users:e.usersPage.users,totalUsers:e.usersPage.totalUsers,currentPage:e.usersPage.currentPage,pageLimit:e.usersPage.pageLimit,isFetching:e.usersPage.isFetching,isFollowInProgress:e.usersPage.isFollowInProgress}}),{setCurrentPage:Lt,getUsersThunk:function(e,t){return function(){var a=Object(R.a)(F.a.mark((function a(r){var n;return F.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r(Lt(t)),r(Wt(!0)),a.next=4,G(e,t);case 4:n=a.sent,r(Wt(!1)),r((o=n.items,{type:yt,users:o})),r((s=n.totalCount,{type:xt,usersCount:s}));case 8:case"end":return a.stop()}var s,o}),a)})));return function(e){return a.apply(this,arguments)}}()},followThunk:function(e){return function(){var t=Object(R.a)(F.a.mark((function t(a){return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(Dt(!0,e)),t.next=3,q(e);case 3:0===t.sent.resultCode&&a({type:jt,userId:e}),a(Dt(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollowThunk:function(e){return function(){var t=Object(R.a)(F.a.mark((function t(a){return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(Dt(!0,e)),t.next=3,X(e);case 3:0===t.sent.resultCode&&a({type:It,userId:e}),a(Dt(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),at)(Kt),qt=a(47),Xt=a.n(qt),Vt=function(e){return s.a.createElement("header",{className:Xt.a.header},s.a.createElement("div",{className:Xt.a.wrapper},s.a.createElement("img",{src:"https://image.flaticon.com/icons/svg/471/471468.svg",height:"50",alt:"logo"}),e.authData.isAuthorized?s.a.createElement("div",null,s.a.createElement("p",{className:Xt.a.login},e.authData.login),s.a.createElement("button",{className:Xt.a.logout,onClick:e.logout},"Logout")):s.a.createElement("p",{className:Xt.a.login},"Login")))},Qt={id:null,email:null,login:null,isAuthorized:!1,captchaUrl:null},$t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"appReducer/SET-AUTH-DATA":return Object(w.a)({},e,{},t.data);case"appReducer/CHECK-AUTH-DATA":return Object(w.a)({},e,{isAuthorized:t.status});case"appReducer/SET_CAPTCHA_URL":return Object(w.a)({},e,{captchaUrl:t.url});default:return e}},ea=function(e){return{type:"appReducer/SET-AUTH-DATA",data:e}},ta=function(e){return{type:"appReducer/CHECK-AUTH-DATA",status:e}},aa=function(e){return{type:"appReducer/SET_CAPTCHA_URL",url:e}},ra=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return s.a.createElement(Vt,{authData:this.props.authData,logout:this.props.logout})}}]),a}(s.a.Component),na=Object(k.b)((function(e){return{authData:e.authReducer}}),{logout:function(){return function(){var e=Object(R.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z();case 2:t(ta(!1)),t(ea({id:null,email:null,login:null}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(ra),sa=a(24),oa=a.n(sa),ia=Object(D.a)({form:"login"})((function(e){return s.a.createElement("form",{onSubmit:e.handleSubmit,className:oa.a.form},s.a.createElement("div",{className:oa.a.formInnerWrapper},s.a.createElement(ve.a,{component:Se,name:"email",type:"email",placeholder:"email",className:oa.a.formLogin,validate:[Le]}),s.a.createElement(ve.a,{component:Se,name:"password",type:"password",placeholder:"password",validate:[Le],className:oa.a.formPassword}),s.a.createElement("div",{className:oa.a.loginBottom},e.isLoading?s.a.createElement("button",{className:oa.a.disabledButton,disabled:!0},"Loading.."):s.a.createElement("button",{type:"submit",className:oa.a.formSubmit},"Log in"),s.a.createElement("label",{className:oa.a.rememberMeWrapper},s.a.createElement(ve.a,{component:"input",type:"checkbox",name:"rememberMe",className:oa.a.checkboxInput}),s.a.createElement("span",null,"remember me"))),e.captchaUrl&&s.a.createElement("img",{src:e.captchaUrl,alt:"captcha"}),e.captchaUrl&&s.a.createElement(ve.a,{component:Se,type:"text",name:"captcha"}),e.error&&s.a.createElement("p",{className:oa.a.formError},e.error)))})),ca=Object(k.b)((function(e){return{isAuthorized:e.authReducer.isAuthorized,captchaUrl:e.authReducer.captchaUrl}}),{loginThunk:function(e){return function(){var t=Object(R.a)(F.a.mark((function t(a){var r,n,s;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K(e);case 2:if(0!==(r=t.sent).resultCode){t.next=10;break}return t.next=6,J();case 6:0===(n=t.sent).resultCode&&(a(ea(n.data)),a(ta(!0)),a(aa(null))),t.next=16;break;case 10:if(10!==r.resultCode){t.next=15;break}return t.next=13,Y();case 13:s=t.sent,a(aa(s.url));case 15:a(Object(ae.a)("login",{_error:r.messages[0]||"Authentication error"}));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=Object(n.useState)(!1),a=Object(he.a)(t,2),r=a[0],o=a[1];return e.isAuthorized?s.a.createElement(et.a,{to:"/profile"}):s.a.createElement("div",{className:oa.a.loginWrapper},s.a.createElement("h1",{className:"visually-hidden"},"User Login"),s.a.createElement(ia,{isLoading:r,captchaUrl:e.captchaUrl,onSubmit:function(t){o(!0),e.loginThunk(t).then((function(){o(!1)}))}}))})),la=a(150),ua=a.n(la),pa=function(){return s.a.createElement("section",{className:ua.a.news},s.a.createElement("img",{src:wt.a,alt:"gear icon",width:"150"}),s.a.createElement("p",null,"Work in progress"))},ma=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return s.a.createElement(pa,this.props)}}]),a}(s.a.Component),fa=Object(M.d)(at)(ma),da=a(151),ga=a.n(da),ha=function(){return s.a.createElement("section",{className:ga.a.settings},s.a.createElement("img",{src:wt.a,alt:"gear icon",width:"150"}),s.a.createElement("p",null,"Work in progress"))},Ea=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return s.a.createElement(ha,this.props)}}]),a}(s.a.Component),_a=Object(M.d)(at)(Ea),ba={authorized:!1},va=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ba,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"appReducer/UPDATE-AUTHORIZATION":return Object(w.a)({},e,{authorized:t.status});default:return e}},ka=(a(152),a(153),function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.initializeThunk()}},{key:"render",value:function(){return this.props.authorized?s.a.createElement("div",{className:"page-wrapper"},s.a.createElement(na,null),s.a.createElement("div",{className:"container"},s.a.createElement(P,null),s.a.createElement(et.d,null,s.a.createElement(et.b,{path:"/login",component:ca}),s.a.createElement(et.b,{path:"/profile/:userId?",render:function(){return s.a.createElement(nt,null)}}),s.a.createElement(et.b,{path:"/messages",render:function(){return s.a.createElement(kt,null)}}),s.a.createElement(et.b,{path:"/users",render:function(){return s.a.createElement(Zt,null)}}),s.a.createElement(et.b,{path:"/news",component:fa}),s.a.createElement(et.b,{path:"/music",component:St}),s.a.createElement(et.b,{path:"/settings",component:_a}),s.a.createElement(et.a,{from:"/",to:"/profile",exact:!0})))):s.a.createElement(x,null)}}]),a}(s.a.Component)),Na=Object(k.b)((function(e){return{authorized:e.app.authorized}}),{initializeThunk:function(){return function(){var e=Object(R.a)(F.a.mark((function e(t){var a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:0===(a=e.sent).resultCode&&(t(ea(a.data)),t(ta(!0))),t({type:"appReducer/UPDATE-AUTHORIZATION",status:!0});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(ka);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Oa={friendsData:[{id:1,name:"Sasha",img:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/LACMTA_Circle_Gold_Line.svg/1200px-LACMTA_Circle_Gold_Line.svg.png"},{id:2,name:"Pasha",img:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/LACMTA_Circle_Gold_Line.svg/1200px-LACMTA_Circle_Gold_Line.svg.png"},{id:3,name:"Masha",img:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/LACMTA_Circle_Gold_Line.svg/1200px-LACMTA_Circle_Gold_Line.svg.png"}]},Pa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oa;return e},wa=a(154),Sa=a(130),ja=Object(M.c)({messagesPage:_t,navBar:Pa,profilePage:ue,usersPage:At,authReducer:$t,app:va,form:Sa.a}),Ia=Object(M.e)(ja,Object(M.a)(wa.a));i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(h.a,null,s.a.createElement(k.a,{store:Ia},s.a.createElement(Na,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},38:function(e,t,a){e.exports={post:"Post_post__2D1Be",postImage:"Post_postImage__2a6IH",message:"Post_message__3Pg5c",likes:"Post_likes__22rX0",labelWrapper:"Post_labelWrapper__PrmkP"}},44:function(e,t,a){e.exports=a.p+"static/media/gear.10c94f85.svg"},45:function(e,t,a){e.exports={info:"Info_info__5ZUTm",avatar:"Info_avatar__1l_7r",editButton:"Info_editButton__3MvF2",imageWrapper:"Info_imageWrapper__1tezk"}},46:function(e,t,a){e.exports={paginatorWrapper:"Paginator_paginatorWrapper__3CMaU",currentPage:"Paginator_currentPage__3ZeH2",pages:"Paginator_pages__3sXxd",prevArrow:"Paginator_prevArrow__3rFU9",nextArrow:"Paginator_nextArrow__2zFse"}},47:function(e,t,a){e.exports={header:"Header_header__2c1ft",wrapper:"Header_wrapper__1Ne_n",login:"Header_login__bdPv2",logout:"Header_logout__18RWM"}},57:function(e,t,a){e.exports={list:"Friends_list__4pkY-",item:"Friends_item__2bRq6",friends:"Friends_friends__1h3RO"}},58:function(e,t,a){e.exports={fieldWrapper:"FormsControls_fieldWrapper__165Lv",error:"FormsControls_error__1pCoy",errorMessage:"FormsControls_errorMessage__3ZmnC"}},6:function(e,t,a){e.exports={personal:"PersonalInfo_personal__1JbhC",name:"PersonalInfo_name__1uHye",jobWrapper:"PersonalInfo_jobWrapper__1xuZg",status:"PersonalInfo_status__3biW2",editWrapper:"PersonalInfo_editWrapper__2fvQw",editButton:"PersonalInfo_editButton__2L9AF",cancelButton:"PersonalInfo_cancelButton__seGkg",table:"PersonalInfo_table__iRuR3",title:"PersonalInfo_title__wwYe_",statusInput:"PersonalInfo_statusInput__LMzcE",contactTitle:"PersonalInfo_contactTitle__2yQEp",contactsWrapper:"PersonalInfo_contactsWrapper__eI0NB",personalTitle:"PersonalInfo_personalTitle__2-E0t",socialWrapper:"PersonalInfo_socialWrapper__2VQ13",disabledSaveButton:"PersonalInfo_disabledSaveButton__1dxRD"}},69:function(e,t,a){e.exports=a.p+"static/media/nobody_profile_image.461b9611.jpg"},74:function(e,t,a){e.exports={peopleWrapper:"Interlocutors_peopleWrapper__msTBA",dialog:"Interlocutors_dialog__2h381",dialogPhoto:"Interlocutors_dialogPhoto__3RqiC"}},97:function(e,t,a){e.exports={profile:"Profile_profile__onn2I"}}},[[180,1,2]]]);
//# sourceMappingURL=main.9c4cbfe5.chunk.js.map